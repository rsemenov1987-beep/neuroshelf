
# UC-005-01: Успешная синхронизация навыка

## Основной поток:
1. Пользователь выбирает купленный навык из списка "Мои навыки"
2. Система проверяет активность лицензии навыка
3. Система запрашивает hardware_hash импланта
4. NeuroLink возвращает текущий hardware_hash и версию
5. Система проверяет совместимость:
   - Версия NeuroLink ≥ min_required_version навыка
   - Hardware_hash присутствует в доверенном списке
   - Не превышен лимит одновременных синхронизаций (≤ 2)
6. Система создает запись sync_sessions со status='pending'
7. Система возвращает session_id и ожидаемое время
8. Пользователь подтверждает начало синхронизации
9. Система меняет статус на 'syncing' и начинает передачу
10. NeuroLink принимает данные и отправляет прогресс каждые 5 секунд
11. Система обновляет progress_percentage в sync_sessions
12. По завершении NeuroLink отправляет verification_hash
13. Система проверяет verification_hash
14. Система обновляет статус на 'completed', записывает completed_at
15. Пользователь получает уведомление об успешной синхронизации

## Альтернативные потоки:

### A1: Неактивная лицензия (шаг 2)
2.1. Лицензия истекла
2.2. Система предлагает продлить подписку
2.3. Use Case завершается

### A2: Несовместимая версия (шаг 5.1)
5.1.1. Версия NeuroLink < min_required_version
5.1.2. Система показывает сообщение: "Требуется обновление NeuroLink до v2.1+"
5.1.3. Предлагает ссылку на обновление
5.1.4. Use Case завершается

### A3: Превышен лимит синхронизаций (шаг 5.3)
5.3.1. У пользователя уже 2 активные синхронизации
5.3.2. Система показывает: "Достигнут лимит (2). Дождитесь завершения одной"
5.3.3. Показывает список активных синхронизаций
5.3.4. Use Case завершается

### A4: Ошибка передачи (шаг 10)
10.1. Соединение прервано
10.2. Система пытается возобновить через 30 секунд
10.3. После 3 попыток статус меняется на 'failed'
10.4. Записывается error_code и error_message
10.5. Пользователь получает уведомление об ошибке

## Предусловия:
- Пользователь аутентифицирован
- Навык куплен и лицензия активна
- NeuroLink подключен к сети

## Постусловия:
- Запись в sync_sessions создана/обновлена
- Отправлено уведомление пользователю
- Обновлена статистика использования навыка
